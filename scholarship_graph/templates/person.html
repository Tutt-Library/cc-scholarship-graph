{% extends 'base.html' %}

{% set admin_mode = scholar|is_admin %}

{% block main %}
<div class="container">
    <h3>        
        <a href="{{ url_for('home') }}"><i class="fas fa-graduation-cap"></i></a>
        Colorado College Scholarship Database 
    </h3>
    <h1>{{ info.givenName }} {{ info.familyName }} {% if admin_mode %}
        <a class="btn btn-primary" 
           href="{{ url_for('academic_profile') }}?person={{ info.url }}">Edit</a>
       {% endif %}</h1>
    <div class="row">
        <div class="col-md-6">
            <article class="card">
                <div class="card-header">Research</div>
                <div class="card-body">

                    {{ info.url|get_statement }}
                </div>
            </article>
            {% if info.subjects %}
            <h3>FAST Subjects <sup><a href="#about-fast" data-target="#about-fast" data-toggle="modal">
            <i class="fas fa-info-circle fa-sm"></i>
        </a></sup></h3>
            <ul>
            {% for subject in info.subjects %}
                <li><a href="{{ url_for('subject_view', iri=subject.subject.value) }}">
                    {{ subject.label.value }}</a></li>
            {% endfor %}
            </ul>
            {% endif %}
            <h3>
        </div>
        <div class="col-md-6">
            <h3>CC Affiliations</h3>
            {{ info.url|get_history|safe }}
              
            <h3>Contact</h3>
            {% for row in info.email %}
                <a href="mailto:{{ row }}">{{ row }}</a>
                {% if not loop.last %},{% endif %}
            {% endfor %}
			
                {% if info.citations|length > 0 or info.book_citations|length > 0 or info.book_chapter_citations|length > 0 %}
		<div style="margin-left:5px; margin-top: 10px;">
				
		<h3>Recent Works</h3>
		<h4>Articles</h4>
                {% if info.citations|length > 0 %}
		{% for row in info.citations %}
			<p>
			{{ row|article_link_filter|safe }}
			{% if 'journal_title' in row %}<em>{{ row.journal_title.value }}</em>{% endif %} ({{ row.datePublished.value }})
			{% if row|volume_issue_filter|safe %} {{ row|volume_issue_filter|safe }} {% endif %}
			{% if row|page_number_filter|safe %}{{ row|page_number_filter|safe }}{% endif %}
			</p>
		{% endfor %}
                {% endif %}
				
                {% if info.book_citations|length > 0 %}
		<h4>Books</h4>
		{% for row in info.book_citations %}
			<p>
			<em>{{ row|book_title_filter|safe }}</em>. 
			{{ row|book_edition_filter|safe }}
			{{ row.provisionActivityStatement.value }}.
			</p>
		{% endfor %}

                {% endif %}

				{% if info.book_chapter_citations|length > 0 %}
		<h4>Book Chapters</h4>
		{% for row in info.book_chapter_citations %}
		<p>
		{{ row.book_chapter_title.value	 }}
		{% if row|page_number_filter|safe %}({{ row|page_number_filter|safe }}{% endif %})
		 in 
		<em>{{ row|book_title_filter|safe }}</em>
		(edited by {{ row.editor.value }}.) 
		{{ row|book_edition_filter|safe }}.
		{{ row.provisionActivityStatement.value }}.
		</p>
		{% endfor %}
		                {% endif %}
		</div>
						{% endif %}

        </div>
    </div>
</div>
{% endblock main %}

{% block dialogs %}
{% include 'about-fast-dlg.html' %}
{% endblock %}
